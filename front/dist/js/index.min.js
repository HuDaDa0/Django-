function Banner(){this.bannerGroup=$("#banner-group"),this.index=0,this.bannerUl=$("#banner-ul"),this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.pageControl=$(".page-control")}function Index(){this.p=2,this.category_id=0,this.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(t){var e=new Date(t),n=e.getTime(),i=((new Date).getTime()-n)/1e3;return i<60?"刚刚":60<i&&i<3600?parseInt(i/60)+"分钟前":3600<i&&i<86400?parseInt(i/60/60)+"小时前":86400<i&&i<2592e3?parseInt(i/60/60/24)+"天前":e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+data.getMinutes()}}Banner.prototype.listenArrowClick=function(){var t=this;this.leftArrow.click(function(){0===t.index?t.index=3:t.index--,t.bannerUl.animate({left:-795*t.index},500)}),this.rightArrow.click(function(){3===t.index?t.index=1:t.index++,t.bannerUl.animate({left:-795*t.index},500)})},Banner.prototype.toggleArrow=function(t){t?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.loop=function(){var t=this;this.timer=setInterval(function(){3<=t.index?t.index=0:t.index++,t.bannerUl.animate({left:-795*t.index},500),t.pageControl.children("li").eq(t.index).addClass("active").siblings().removeClass("active")},2e3)},Banner.prototype.run=function(){this.loop()},Banner.prototype.listenBannerHover=function(){var t=this;this.bannerGroup.hover(function(){clearInterval(t.timer),t.toggleArrow(!0)},function(){t.loop(),t.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var n=this;this.pageControl.children("li").each(function(t,e){$(e).click(function(){n.index=t,n.bannerUl.animate({left:-795*n.index},1e3),$(e).addClass("active").siblings().removeClass("active")})})},Index.prototype.listenLoadMoreEvent=function(){var i=this;this.loadBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.p,category_id:i.category_id},success:function(t){if(200===t.code){var e=t.data;if(0<e.length){var n=template("news-item",{newses:e});$(".list-inner-group").append(n),i.p+=1}else i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this).attr("data-category");xfzajax.get({url:"/news/list/",data:{p:1,category_id:r},success:function(t){if(200===t.code){var e=t.data,n=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(n),o.category_id=r,o.p=2,o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var t=new Banner;t.run(),t.listenBannerHover(),t.listenArrowClick(),t.listenPageControl(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJHcm91cCIsIiQiLCJpbmRleCIsImJhbm5lclVsIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwIiwiY2F0ZWdvcnlfaWQiLCJsb2FkQnRuIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGVzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsInBhcnNlSW50IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZGF0YSIsImdldE1pbnV0ZXMiLCJwcm90b3R5cGUiLCJsaXN0ZW5BcnJvd0NsaWNrIiwic2VsZiIsImNsaWNrIiwiYW5pbWF0ZSIsImxlZnQiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJjaGlsZHJlbiIsImVxIiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwicnVuIiwibGlzdGVuQmFubmVySG92ZXIiLCJob3ZlciIsImNsZWFySW50ZXJ2YWwiLCJsaXN0ZW5QYWdlQ29udHJvbCIsImVhY2giLCJvYmoiLCJsaXN0ZW5Mb2FkTW9yZUV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJsZW5ndGgiLCJ0cGwiLCJhcHBlbmQiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwiYXR0ciIsInVsIiwiZW1wdHkiLCJiYW5uZXIiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLFlBQWNDLEVBQUUsaUJBQ3JCRixLQUFLRyxNQUFRLEVBRWJILEtBQUtJLFNBQVdGLEVBQUUsY0FDbEJGLEtBQUtLLFVBQVlILEVBQUUsZUFDbkJGLEtBQUtNLFdBQWFKLEVB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eEIsSUFBSUMsRUFBU0QsRUFBYSxLQUMxQixHQUFvQixFQUFoQkMsRUFBT0MsT0FBWSxDQUVuQixJQUFJQyxFQUFNbEQsU0FBUyxZQUFhLENBQUNnRCxPQUFVQSxJQUNsQzFELEVBQUUscUJBRVI2RCxPQUFPRCxHQUNWL0IsRUFBS3RCLEdBQUssT0FFVnNCLEVBQUtwQixRQUFRMkIsY0FTckM5QixNQUFNcUIsVUFBVW1DLDBCQUE0QixXQUN4QyxJQUFJakMsRUFBTy9CLEtBQ0ZFLEVBQUUsYUFDUndDLFdBQVdWLE1BQU0sV0FDaEIsSUFDSXRCLEVBREtSLEVBQUVGLE1BQ1VpRSxLQUFLLGlCQUUxQlYsUUFBUUMsSUFBSSxDQUNSQyxJQUFPLGNBQ1A5QixLQUFRLENBQ0psQixFQUpBLEVBS0FDLFlBQWVBLEdBRW5CZ0QsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJHLEVBQU1sRCxTQUFTLFlBQWEsQ0FBQ2dELE9BQVVBLElBQ3ZDTSxFQUFLaEUsRUFBRSxxQkFFWGdFLEVBQUdDLFFBQ0hELEVBQUdILE9BQU9ELEdBQ1YvQixFQUFLckIsWUFBY0EsRUFDbkJxQixFQUFLdEIsRUFBSSxFQUNUc0IsRUFBS3BCLFFBQVEwQixjQVFqQzdCLE1BQU1xQixVQUFVa0IsSUFBTSxXQUNsQi9DLEtBQUtzRCxzQkFDTHRELEtBQUtnRSw2QkFJVDlELEVBQUUsV0FDRSxJQUFJa0UsRUFBUyxJQUFJckUsT0FDakJxRSxFQUFPckIsTUFDUHFCLEVBQU9wQixvQkFDUG9CLEVBQU90QyxtQkFDUHNDLEVBQU9qQixxQkFFSyxJQUFJM0MsT0FDVnVDIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKCcjYmFubmVyLWdyb3VwJyk7XHJcbiAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgIC8vIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKCcjYmFubmVyLXVsJyk7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoJy5sZWZ0LWFycm93Jyk7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKCcucmlnaHQtYXJyb3cnKTtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQXJyb3dDbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMubGVmdEFycm93LmNsaWNrKFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5kZXggPSAzO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7J2xlZnQnOiAtNzk1KnNlbGYuaW5kZXh9LCA1MDApO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cuY2xpY2soXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbmRleCA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5hbmltYXRlKHsnbGVmdCc6IC03OTUqc2VsZi5pbmRleH0sIDUwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUudG9nZ2xlQXJyb3cgPSBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICBpZiAoaXNTaG93KSB7XHJcbiAgICAgICAgdGhpcy5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHRoaXMucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSAzKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5iYW5uZXJVbC5hbmltYXRlKHsnbGVmdCc6IC03OTUqc2VsZi5pbmRleH0sIDUwMCk7XHJcbiAgICAgICAgLy8gZXEoKSDmmK/oh6rliqjojrflj5blvZPliY3nmoQgbGkg5qCH562+XHJcbiAgICAgICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lcShzZWxmLmluZGV4KS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgfSwgMjAwMCk7XHJcblxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnrKzkuIDkuKrlh73mlbDml7bmoaPpvKDmoIfnu4/ov4fml7bvvIzmiafooYznmoTmk43kvZxcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g56ys5LqM5Liq5Ye95pWw5piv5qGj6byg5qCH56a75byA5ZCO77yM5omn6KGM55qE5pON5L2cXHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcclxuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7J2xlZnQnOiAtNzk1KnNlbGYuaW5kZXh9LCAxMDAwKTtcclxuICAgICAgICAgICAgJChvYmopLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbmZ1bmN0aW9uIEluZGV4KCkge1xyXG4gICAgdGhpcy5wID0gMjtcclxuICAgIHRoaXMuY2F0ZWdvcnlfaWQgPSAwO1xyXG4gICAgdGhpcy5sb2FkQnRuID0gJCgnI2xvYWQtbW9yZS1idG4nKTtcclxuXHJcbiAgICAvLyDoh6rlrprkuYnpqozor4HlmahcclxuICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgICAgICB2YXIgZGF0ZXMgPSBkYXRlLmdldFRpbWUoKTsgIC8vIOavq+enklxyXG4gICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7ICAgIC8vIOW+l+WIsOW9k+WJjeeahOaXtumXtOeahOaXtumXtOaIs1xyXG4gICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMtZGF0ZXMpIC8gMTAwMDsgIC8vIOmZpOS7pSAxMDAwIOW+l+WIsOeahOaYr+enklxyXG5cclxuICAgICAgICBpZiAodGltZXN0YW1wIDwgNjApIHtcclxuICAgICAgICAgICAgcmV0dXJuICfliJrliJonXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPiA2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCkge1xyXG4gICAgICAgICAgICB2YXIgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID4gNjAqNjAgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQpIHtcclxuICAgICAgICAgICAgdmFyIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLzYwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGhvdXJzICsgJ+Wwj+aXtuWJjSdcclxuICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+IDYwKjYwKjI0ICYmIHRpbWVzdGFtcCA8IDYwKjYwKjI0KjMwKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRheXMgKyAn5aSp5YmNJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzID0gZGF0YS5nZXRNaW51dGVzKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4geWVhcisnLycrbW9udGgrJy8nK2RheSsnICcraG91cnMrJzonK21pbnV0ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdGhpcy5sb2FkQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwJzogc2VsZi5wLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bmqKHmnb/vvIzloavlhaXmlbDmja4gbmV3c2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnbmV3cy1pdGVtJywgeyduZXdzZXMnOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Zyo55uu5qCHIHVsIOagh+etvuS4iu+8jOa3u+WKoCDmqKHmnb8g5YaF5a65XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnAgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdWwgPSAkKCcubGlzdC10YWInKTtcclxuICAgIHVsLmNoaWxkcmVuKCkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cignZGF0YS1jYXRlZ29yeScpO1xyXG4gICAgICAgIHZhciBwID0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvbGlzdC8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdwJzogcCxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IGNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoJy5saXN0LWlubmVyLWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Zyo55uu5qCHIHVsIOagh+etvuS4iu+8jOa3u+WKoCDmqKHmnb8g5YaF5a65XHJcbiAgICAgICAgICAgICAgICAgICAgdWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhdGVnb3J5X2lkID0gY2F0ZWdvcnlfaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICB0aGlzLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcclxufTtcclxuXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcbiAgICBiYW5uZXIubGlzdGVuQmFubmVySG92ZXIoKTtcclxuICAgIGJhbm5lci5saXN0ZW5BcnJvd0NsaWNrKCk7XHJcbiAgICBiYW5uZXIubGlzdGVuUGFnZUNvbnRyb2woKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTtcclxuXHJcbi8vIOS4iumdouaYr+aKhOiAgeW4iOeahO+8jOS4i+mdouaYr+iHquW3seWGmeeahO+8jOaViOaenOS4gOagt1xyXG4vLyBmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbi8vIFx0dGhpcy5pbmRleCA9IDA7XHJcbi8vIH1cclxuLy8gQmFubmVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24gKCkge1xyXG4vLyBcdHZhciBzZWxmID0gdGhpcztcclxuLy8gXHR2YXIgYmFubmVyVWwgPSAkKCcjYmFubmVyLXVsJyk7XHJcbi8vIFx0dGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICBpZiAoc2VsZi5pbmRleCA+PSAzKSB7XHJcbi8vICAgICAgICAgXHRzZWxmLmluZGV4ID0gMDtcclxuLy8gICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIFx0c2VsZi5pbmRleCsrO1xyXG4vLyAgICAgICAgIH1cclxuLy9cclxuLy8gICAgICAgICBiYW5uZXJVbC5hbmltYXRlKHsnbGVmdCc6IC03OTUqc2VsZi5pbmRleH0sIDUwMCk7XHJcbi8vIFx0fSwgMTAwMCk7XHJcbi8vIH07XHJcbi8vXHJcbi8vIEJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4vLyBcdHRoaXMubG9vcCgpO1xyXG4vLyB9O1xyXG4vL1xyXG4vLyBCYW5uZXIucHJvdG90eXBlLmxpc3RlbkJhbm5lckhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4vLyBcdHZhciBzZWxmID0gdGhpcztcclxuLy8gXHR2YXIgYmFubmVyR3JvdXAgPSAkKCcjYmFubmVyLWdyb3VwJyk7XHJcbi8vIFx0YmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24oKSB7XHJcbi8vIFx0XHQvLyDpvKDmoIfnu4/ov4fml7bvvIzkvJrop6blj5Hov5nkuKrlh73mlbBcclxuLy8gXHRcdGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbi8vIFx0fSwgZnVuY3Rpb24gKCkge1xyXG4vLyBcdFx0Ly8g6byg5qCH56a75byA5ZCO77yM5Lya6Kem5Y+R6L+Z5Liq5Ye95pWwXHJcbi8vIFx0XHRzZWxmLmxvb3AoKTtcclxuLy8gXHR9KTtcclxuLy8gfTtcclxuLy9cclxuLy9cclxuLy8gJChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xyXG4vLyAgICAgYmFubmVyLnJ1bigpO1xyXG4vLyAgICAgYmFubmVyLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcblxyXG4vLyB9KTtcclxuXHJcbiJdfQ==
