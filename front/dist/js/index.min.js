function Banner(){this.bannerGroup=$("#banner-group"),this.index=0,this.bannerUl=$("#banner-ul"),this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.pageControl=$(".page-control")}function Index(){this.p=2,this.category_id=0,this.loadBtn=$("#load-more-btn"),template.defaults.imports.timeSince=function(t){var e=new Date(t),n=e.getTime(),i=((new Date).getTime()-n)/1e3;return i<60?"刚刚":60<i&&i<3600?parseInt(i/60)+"分钟前":3600<i&&i<86400?parseInt(i/60/60)+"小时前":86400<i&&i<2592e3?parseInt(i/60/60/24)+"天前":e.getFullYear()+"/"+e.getMonth()+"/"+e.getDay()+" "+e.getHours()+":"+data.getMinutes()}}Banner.prototype.listenArrowClick=function(){var t=this;this.leftArrow.click(function(){0===t.index?t.index=3:t.index--,t.bannerUl.animate({left:-795*t.index},500)}),this.rightArrow.click(function(){3===t.index?t.index=0:t.index++,t.bannerUl.animate({left:-795*t.index},500)})},Banner.prototype.toggleArrow=function(t){t?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.loop=function(){var t=this;this.timer=setInterval(function(){3<=t.index?t.index=0:t.index++,t.bannerUl.stop().animate({left:-795*t.index},500),t.pageControl.children("li").eq(t.index).addClass("active").siblings().removeClass("active")},2e3)},Banner.prototype.run=function(){this.loop()},Banner.prototype.listenBannerHover=function(){var t=this;this.bannerGroup.hover(function(){clearInterval(t.timer),t.toggleArrow(!0)},function(){t.loop(),t.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var n=this;this.pageControl.children("li").each(function(t,e){$(e).click(function(){n.index=t,n.bannerUl.animate({left:-795*n.index},1e3),$(e).addClass("active").siblings().removeClass("active")})})},Index.prototype.listenLoadMoreEvent=function(){var i=this;this.loadBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.p,category_id:i.category_id},success:function(t){if(200===t.code){var e=t.data;if(0<e.length){var n=template("news-item",{newses:e});$(".list-inner-group").append(n),i.p+=1}else i.loadBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this).attr("data-category");xfzajax.get({url:"/news/list/",data:{p:1,category_id:r},success:function(t){if(200===t.code){var e=t.data,n=template("news-item",{newses:e}),i=$(".list-inner-group");i.empty(),i.append(n),o.category_id=r,o.p=2,o.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var t=new Banner;t.run(),t.listenBannerHover(),t.listenArrowClick(),t.listenPageControl(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJHcm91cCIsIiQiLCJpbmRleCIsImJhbm5lclVsIiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJwIiwiY2F0ZWdvcnlfaWQiLCJsb2FkQnRuIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGVzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsInBhcnNlSW50IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERheSIsImdldEhvdXJzIiwiZGF0YSIsImdldE1pbnV0ZXMiLCJwcm90b3R5cGUiLCJsaXN0ZW5BcnJvd0NsaWNrIiwic2VsZiIsImNsaWNrIiwiYW5pbWF0ZSIsImxlZnQiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwibG9vcCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJzdG9wIiwiY2hpbGRyZW4iLCJlcSIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInJ1biIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwibGVuZ3RoIiwidHBsIiwiYXBwZW5kIiwibGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCIsImF0dHIiLCJ1bCIsImVtcHR5IiwiYmFubmVyIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxTQUNMQyxLQUFLQyxZQUFjQyxFQUFFLGlCQUNyQkYsS0FBS0csTUFBUSxFQUViSCxLQUFLSSxTQUFXRixFQUFFLGNBQ2xCRixLQUFLSyxVQUFZSCxFQUFFLGVBQ25CRixLQUFLTSxX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RUFBYSxLQUFXLENBQ3hCLElBQUlDLEVBQVNELEVBQWEsS0FDMUIsR0FBb0IsRUFBaEJDLEVBQU9DLE9BQVksQ0FFbkIsSUFBSUMsRUFBTW5ELFNBQVMsWUFBYSxDQUFDaUQsT0FBVUEsSUFDbEMzRCxFQUFFLHFCQUVSOEQsT0FBT0QsR0FDVmhDLEVBQUt0QixHQUFLLE9BRVZzQixFQUFLcEIsUUFBUTJCLGNBU3JDOUIsTUFBTXFCLFVBQVVvQywwQkFBNEIsV0FDeEMsSUFBSWxDLEVBQU8vQixLQUNGRSxFQUFFLGFBQ1J5QyxXQUFXWCxNQUFNLFdBQ2hCLElBQ0l0QixFQURLUixFQUFFRixNQUNVa0UsS0FBSyxpQkFFMUJWLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxjQUNQL0IsS0FBUSxDQUNKbEIsRUFKQSxFQUtBQyxZQUFlQSxHQUVuQmlELFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJQyxFQUFTRCxFQUFhLEtBQ3RCRyxFQUFNbkQsU0FBUyxZQUFhLENBQUNpRCxPQUFVQSxJQUN2Q00sRUFBS2pFLEVBQUUscUJBRVhpRSxFQUFHQyxRQUNIRCxFQUFHSCxPQUFPRCxHQUNWaEMsRUFBS3JCLFlBQWNBLEVBQ25CcUIsRUFBS3RCLEVBQUksRUFDVHNCLEVBQUtwQixRQUFRMEIsY0FRakM3QixNQUFNcUIsVUFBVW1CLElBQU0sV0FDbEJoRCxLQUFLdUQsc0JBQ0x2RCxLQUFLaUUsNkJBSVQvRCxFQUFFLFdBQ0UsSUFBSW1FLEVBQVMsSUFBSXRFLE9BQ2pCc0UsRUFBT3JCLE1BQ1BxQixFQUFPcEIsb0JBQ1BvQixFQUFPdkMsbUJBQ1B1QyxFQUFPakIscUJBRUssSUFBSTVDLE9BQ1Z3QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJCgnI2Jhbm5lci1ncm91cCcpO1xyXG4gICAgdGhpcy5pbmRleCA9IDA7XHJcbiAgICAvLyB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJCgnI2Jhbm5lci11bCcpO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKCcubGVmdC1hcnJvdycpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJCgnLnJpZ2h0LWFycm93Jyk7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sID0gJCgnLnBhZ2UtY29udHJvbCcpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmxlZnRBcnJvdy5jbGljayhcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmluZGV4ID0gMztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5kZXgtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmFuaW1hdGUoeydsZWZ0JzogLTc5NSpzZWxmLmluZGV4fSwgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5yaWdodEFycm93LmNsaWNrKFxyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDMpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuYW5pbWF0ZSh7J2xlZnQnOiAtNzk1KnNlbGYuaW5kZXh9LCA1MDApO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgIHRoaXMubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gMykge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoeydsZWZ0JzogLTc5NSpzZWxmLmluZGV4fSwgNTAwKTtcclxuICAgICAgICAvLyBlcSgpIOaYr+iHquWKqOiOt+WPluW9k+WJjeeahCBsaSDmoIfnrb5cclxuICAgICAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKHNlbGYuaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICB9LCAyMDAwKTtcclxuXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubG9vcCgpO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5CYW5uZXJIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuYmFubmVyR3JvdXAuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOesrOS4gOS4quWHveaVsOaXtuaho+m8oOagh+e7j+i/h+aXtu+8jOaJp+ihjOeahOaTjeS9nFxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lcik7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyh0cnVlKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnrKzkuozkuKrlh73mlbDmmK/moaPpvKDmoIfnprvlvIDlkI7vvIzmiafooYznmoTmk43kvZxcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHRoaXMucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5hbmltYXRlKHsnbGVmdCc6IC03OTUqc2VsZi5pbmRleH0sIDEwMDApO1xyXG4gICAgICAgICAgICAkKG9iaikuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICB0aGlzLnAgPSAyO1xyXG4gICAgdGhpcy5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICB0aGlzLmxvYWRCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xyXG5cclxuICAgIC8vIOiHquWumuS5iemqjOivgeWZqFxyXG4gICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgIHZhciBkYXRlcyA9IGRhdGUuZ2V0VGltZSgpOyAgLy8g5q+r56eSXHJcbiAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsgICAgLy8g5b6X5Yiw5b2T5YmN55qE5pe26Ze055qE5pe26Ze05oizXHJcbiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cy1kYXRlcykgLyAxMDAwOyAgLy8g6Zmk5LulIDEwMDAg5b6X5Yiw55qE5piv56eSXHJcblxyXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ+WImuWImidcclxuICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+IDYwICYmIHRpbWVzdGFtcCA8IDYwKjYwKSB7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gbWludXRlcyArICfliIbpkp/liY0nXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPiA2MCo2MCAmJiB0aW1lc3RhbXAgPCA2MCo2MCoyNCkge1xyXG4gICAgICAgICAgICB2YXIgaG91cnMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvNjApO1xyXG4gICAgICAgICAgICByZXR1cm4gaG91cnMgKyAn5bCP5pe25YmNJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGltZXN0YW1wID4gNjAqNjAqMjQgJiYgdGltZXN0YW1wIDwgNjAqNjAqMjQqMzApIHtcclxuICAgICAgICAgICAgdmFyIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF5cyArICflpKnliY0nXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgIHZhciBob3VycyA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBkYXRhLmdldE1pbnV0ZXMoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB5ZWFyKycvJyttb250aCsnLycrZGF5KycgJytob3VycysnOicrbWludXRlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICB0aGlzLmxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnAsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBzZWxmLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c2VzID0gcmVzdWx0WydkYXRhJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluaooeadv++8jOWhq+WFpeaVsOaNriBuZXdzZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKCduZXdzLWl0ZW0nLCB7J25ld3Nlcyc6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKCcubGlzdC1pbm5lci1ncm91cCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlnKjnm67moIcgdWwg5qCH562+5LiK77yM5re75YqgIOaooeadvyDlhoXlrrlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB1bCA9ICQoJy5saXN0LXRhYicpO1xyXG4gICAgdWwuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKCdkYXRhLWNhdGVnb3J5Jyk7XHJcbiAgICAgICAgdmFyIHAgPSAxO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBwLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ25ld3MtaXRlbScsIHsnbmV3c2VzJzogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJCgnLmxpc3QtaW5uZXItZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlnKjnm67moIcgdWwg5qCH562+5LiK77yM5re75YqgIOaooeadvyDlhoXlrrlcclxuICAgICAgICAgICAgICAgICAgICB1bC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnAgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuICAgIGJhbm5lci5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG4gICAgYmFubmVyLmxpc3RlbkFycm93Q2xpY2soKTtcclxuICAgIGJhbm5lci5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG5cclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcbn0pO1xyXG5cclxuLy8g5LiK6Z2i5piv5oqE6ICB5biI55qE77yM5LiL6Z2i5piv6Ieq5bex5YaZ55qE77yM5pWI5p6c5LiA5qC3XHJcbi8vIGZ1bmN0aW9uIEJhbm5lcigpIHtcclxuLy8gXHR0aGlzLmluZGV4ID0gMDtcclxuLy8gfVxyXG4vLyBCYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0dmFyIHNlbGYgPSB0aGlzO1xyXG4vLyBcdHZhciBiYW5uZXJVbCA9ICQoJyNiYW5uZXItdWwnKTtcclxuLy8gXHR0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIGlmIChzZWxmLmluZGV4ID49IDMpIHtcclxuLy8gICAgICAgICBcdHNlbGYuaW5kZXggPSAwO1xyXG4vLyAgICAgICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgXHRzZWxmLmluZGV4Kys7XHJcbi8vICAgICAgICAgfVxyXG4vL1xyXG4vLyAgICAgICAgIGJhbm5lclVsLmFuaW1hdGUoeydsZWZ0JzogLTc5NSpzZWxmLmluZGV4fSwgNTAwKTtcclxuLy8gXHR9LCAxMDAwKTtcclxuLy8gfTtcclxuLy9cclxuLy8gQmFubmVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0dGhpcy5sb29wKCk7XHJcbi8vIH07XHJcbi8vXHJcbi8vIEJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0dmFyIHNlbGYgPSB0aGlzO1xyXG4vLyBcdHZhciBiYW5uZXJHcm91cCA9ICQoJyNiYW5uZXItZ3JvdXAnKTtcclxuLy8gXHRiYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbigpIHtcclxuLy8gXHRcdC8vIOm8oOagh+e7j+i/h+aXtu+8jOS8muinpuWPkei/meS4quWHveaVsFxyXG4vLyBcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuLy8gXHR9LCBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0XHQvLyDpvKDmoIfnprvlvIDlkI7vvIzkvJrop6blj5Hov5nkuKrlh73mlbBcclxuLy8gXHRcdHNlbGYubG9vcCgpO1xyXG4vLyBcdH0pO1xyXG4vLyB9O1xyXG4vL1xyXG4vL1xyXG4vLyAkKGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbi8vICAgICBiYW5uZXIucnVuKCk7XHJcbi8vICAgICBiYW5uZXIubGlzdGVuQmFubmVySG92ZXIoKTtcclxuXHJcbi8vIH0pO1xyXG5cclxuIl19
