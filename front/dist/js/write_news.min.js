function News(){}News.prototype.run=function(){this.listenUploadFileEvent(),this.initUeditorEvent(),this.listenSubmitEvent()},News.prototype.listenUploadFileEvent=function(){var n=$(".thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=$("#thumbnail-form"),n=t.data.url;e.val(n)}}})})},News.prototype.initUeditorEvent=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),a=$("input[name='desc']").val(),o=$("input[name='thumbnail']").val(),s=window.ue.getContent(),l="";if(e)l="/cms/edit_news/";else l="/cms/write_news/";xfzajax.post({url:l,data:{title:n,category:i,desc:a,thumbnail:o,content:s,pk:e},success:function(t){200===t.code&&xfzalert.alertSuccess("发文成功！",function(){window.location.reload()})},fail:function(){}})})},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsInJ1biIsInRoaXMiLCJsaXN0ZW5VcGxvYWRGaWxlRXZlbnQiLCJpbml0VWVkaXRvckV2ZW50IiwibGlzdGVuU3VibWl0RXZlbnQiLCJ1cGxvYWRCdG4iLCIkIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidGh1bWJuYWlsSW5wdXQiLCJ2YWwiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGsiLCJhdHRyIiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJmYWlsIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUtUQSxLQUFLQyxVQUFVQyxJQUFNLFdBQ2pCQyxLQUFLQyx3QkFDTEQsS0FBS0UsbUJBQ0xGLEtBQUtHLHFCQUlUTixLQUFLQyxVQUFVRyxzQkFBd0IsV0FDbkMsSUFBSUcsRUFBWUMsRUFBRSxrQkFFbEJELEVBQVVFLE9BQU8sV0FDYixJQUFJQyxFQUFPSCxFQUFVLEdBQUdJLE1BQU0sR0FDMUJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUosR0FFeEJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBU0MsR0FDaEIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJQyxFQUFpQmYsRUFBRSxtQkFDbkJTLEVBQU1LLEVBQWEsS0FBTyxJQUM5QkMsRUFBZUMsSUFBSVAsVUFTdkNqQixLQUFLQyxVQUFVSSxpQkFBbUIsV0FDOUJvQixPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVUsQ0FDL0JDLG1CQUFzQixJQUN0QkMsVUFBYSxzQkFPckI5QixLQUFLQyxVQUFVSyxrQkFBb0IsV0FDZkUsRUFBRSxlQUVSdUIsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBQ04sSUFDSUMsRUFETzFCLEVBQUVMLE1BQ0NnQyxLQUFLLGdCQUVmQyxFQUFRNUIsRUFBRSx1QkFBdUJnQixNQUNqQ2EsRUFBVzdCLEVBQUUsMkJBQTJCZ0IsTUFDeENjLEVBQU85QixFQUFFLHNCQUFzQmdCLE1BQy9CZSxFQUFZL0IsRUFBRSwyQkFBMkJnQixNQUN6Q2dCLEVBQVVmLE9BQU9DLEdBQUdlLGFBRXBCeEIsRUFBTSxHQUNWLEdBQUlpQixFQUNJakIsRUFBTSx1QkFFTkEsRUFBTSxtQkFHZEYsUUFBUUMsS0FBSyxDQUNUQyxJQUFPQSxFQUNQQyxLQUFRLENBQ0prQixNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYTixHQUFNQSxHQUVWYixRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsTUFDYm9CLFNBQVNDLGFBQWEsUUFBUyxXQUMzQmxCLE9BQU9tQixTQUFTQyxZQUk1QkMsS0FBUSxrQkFRcEJ0QyxFQUFFLFlBQ2EsSUFBSVIsTUFDVkUiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge1xyXG5cclxufVxyXG5cclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICB0aGlzLmluaXRVZWRpdG9yRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbi8vIOS4iuS8oOaWh+S7tlxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnLnRodW1ibmFpbC1idG4nKTtcclxuXHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG4vLyDlr4zmlofmnKznvJbovpHlmahcclxuTmV3cy5wcm90b3R5cGUuaW5pdFVlZGl0b3JFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcignZWRpdG9yJywge1xyXG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA0MDAsXHJcbiAgICAgICAgJ3NlcnZlclVybCc6ICcvdWVkaXRvci91cGxvYWQvJ1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuXHJcbi8vIOWPkeW4g+aWsOmXu1xyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKCcjc3VibWl0LWJ0bicpO1xyXG5cclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgcGsgPSBzZWxmLmF0dHIoJ2RhdGEtbmV3cy1pZCcpO1xyXG5cclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgaWYgKHBrKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxyXG4gICAgICAgICAgICAgICAgJ3RodW1ibmFpbCc6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcclxuICAgICAgICAgICAgICAgICdwayc6IHBrXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+WPkeaWh+aIkOWKn++8gScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
